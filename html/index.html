<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>WASM Test</title>
    <script>
        function native_add(a, b) {
            console.log(`native_add: ${a} ${b}`);
            return a + b;
        }


        async function main(module) {
            let imports = { env: { native_add: add } }
            let instance = await WebAssembly.instantiate(module, imports);
            console.log(instance.exports.add(5n, 2n));
        }

        fetch('native_add.wasm')
            .then((response) => response.arrayBuffer())
            .then((buf) => WebAssembly.compile(buf))
            .then(main)

    </script>
</head>

</html>